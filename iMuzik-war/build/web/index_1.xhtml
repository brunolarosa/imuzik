<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:c="http://java.sun.com/jsp/jstl/core">
    <head>
        <link href="./../resources/css/reset.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <f:view>
            <c:choose>
                <c:when test="${userMBean.userLogged.id == null}">
                    <h:form>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Email:" for="email" />
                            <h:inputText id="email" value="#{userMBean.email}" title="Email" />
                            <h:outputLabel value="Password:" for="password" />
                            <h:inputText id="password" value="#{userMBean.password}" title="Password" />
                            <h:commandLink value="Login" action="#{userMBean.connect()}"/>
                            <h:commandLink value="SignUp" action="#{userMBean.signup()}"/>
                        </h:panelGrid>
                    </h:form>
                </c:when>

                <c:otherwise>
                    <h:form>
                        <h1><h:outputText value="View"/></h1>
                        <h:panelGrid columns="2">
                            <h:outputText value="LastName:"/>
                            <h:outputText value="#{userMBean.userLogged.lastName}" title="LastName"/>
                            <h:commandLink value="LogOut" action="#{userMBean.disconnect()}"/>
                        </h:panelGrid>
                    </h:form>
                </c:otherwise>
            </c:choose>



        </f:view>


        <div id="container">
            <iframe width="100%" height="640px" src="artistsList.xhtml" name="iframe"></iframe>
        </div>
        <footer id="footer">
            <div id="global">
                <audio id="player" preload="false" controls="true">
                    <source id="sourceplayer" src="../musicServlet?m=1" />
                </audio>
            </div>
 <c:forEach var="playlist" items="#{userMBean.userLogged.myPlaylists}">
            <h:form>

               
                    <h:outputText value= "#{playlist.id}" title="id"/>
                    <h:commandLink value="select" action="#{userMBean.setPlaylist(playlist.id)}"/>
            </h:form>
                     </c:forEach>  

            <div>



            </div>
        </footer>

        <script>
        
            function changeMusic(id)
            { 
                parent.document.getElementById('sourceplayer').setAttribute('src','../musicServlet?m='+id);
                parent.document.getElementById('player').load();
                parent.document.getElementById('player').play();
            }
        
            function addMusic(id)
            {
                var source=document.createElement("source");
                source.setAttribute('id', 'sourceplayer'+id);
                source.setAttribute('src','../musicServlet?m='+id);
                document.getElementById("player").appendChild(source);
            }

        </script>


    </body>


</html>
