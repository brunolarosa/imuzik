<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="./../resources/css/bootstrap.css" rel="stylesheet" type="text/css" />
        <link href="./../resources/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
        <link href="./../resources/css/main.css" rel="stylesheet" type="text/css" />


        <title>iMuzik</title>
    </h:head>

    <body>

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                   <h:form class="brand" ><h:commandLink value="IMuzik" action="#{userMBean.signup()}"  target="iframe"/></h:form>
                    <div class="nav-collapse collapse">
                            <f:view>
                                <c:choose>
                                    <c:when test="${userMBean.userLogged.id == null}">
                                        <h:form class="navbar-form pull-right">
 
                                                <h:inputText id="email" value="#{userMBean.email}"  title="Email" class="span2" placeholder="Email"/>   <h:inputText id="password" value="#{userMBean.password}"  title="Password" class="span2" placeholder="Password"/>
                                                <h:commandLink value="Connection" action="#{userMBean.connect()}" class="btn btn-primary btn-primary"/>
                         
                                        </h:form>
                                    </c:when>

                                    <c:otherwise>
                                        <h:form class="navbar-text pull-right">
                                            <h:outputText value="Bienvenue #{userMBean.userLogged.lastName}" title="LastName" class="navbar-text"/>
                                            <h:commandLink value="DÃ©connexion" action="#{userMBean.disconnect()}" class="btn btn-primary btn-primary"/>
                                        </h:form>
                                    </c:otherwise>
                                </c:choose>
                            </f:view>

                  
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <div class="container-fluid">

            <iframe width="100%" height="640px" src="artistsList.xhtml" name="iframe"/>


            <footer id="global">
                <audio id="player" preload="false" controls="true">
                    <source id="sourceplayer" src="../musicServlet?m=1" />
                </audio>
            </footer>

        </div><!--/.fluid-container-->

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="../assets/js/jquery.js"></script>
        <script src="../assets/js/bootstrap-transition.js"></script>
        <script src="../assets/js/bootstrap-alert.js"></script>
        <script src="../assets/js/bootstrap-modal.js"></script>
        <script src="../assets/js/bootstrap-dropdown.js"></script>
        <script src="../assets/js/bootstrap-scrollspy.js"></script>
        <script src="../assets/js/bootstrap-tab.js"></script>
        <script src="../assets/js/bootstrap-tooltip.js"></script>
        <script src="../assets/js/bootstrap-popover.js"></script>
        <script src="../assets/js/bootstrap-button.js"></script>
        <script src="../assets/js/bootstrap-collapse.js"></script>
        <script src="../assets/js/bootstrap-carousel.js"></script>
        <script src="../assets/js/bootstrap-typeahead.js"></script>

        <script>
        
            function changeMusic(id)
            { 
                document.getElementById('sourceplayer').setAttribute('src','../musicServlet?m='+id);
                document.getElementById('player').load();
                document.getElementById('player').play();
            }
        
            function addMusic(id)
            {
                var source=document.createElement("source");
                source.setAttribute('id', 'sourceplayer'+id);
                source.setAttribute('src','../musicServlet?m='+id);
                document.getElementById("player").appendChild(source);
            }

        </script>

    </body>

</html>
